<!-- Shopping Cart Page -->
<main class="cart-page">

  <!-- Page Header -->
  <section class="cart-header">
    <div class="cart-header__container">
      <h1 class="cart-header__title">Shopping Cart</h1>
      <p class="cart-header__subtitle">
        {{ cartItems.length }} {{ cartItems.length === 1 ? 'item' : 'items' }} in your cart
      </p>
    </div>
  </section>

  <!-- Cart Content -->
  <section class="cart-content">
    <div class="cart-content__container">

      <!-- Empty Cart State -->
      <div class="empty-cart" *ngIf="cartItems.length === 0">
        <svg class="empty-cart__icon" width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
        </svg>
        <h2 class="empty-cart__title">Your cart is empty</h2>
        <p class="empty-cart__description">
          Looks like you haven't added any items to your cart yet.
        </p>
        <a class="button button--primary button--large" routerLink="/shop">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
          </svg>
          Continue Shopping
        </a>
      </div>

      <!-- Cart Grid -->
      <div class="cart-grid" *ngIf="cartItems.length > 0">

        <!-- Cart Items -->
        <div class="cart-items">
          <div class="cart-items__header">
            <h2 class="cart-items__title">Cart Items</h2>
            <button 
              class="cart-items__clear" 
              (click)="clearCart()"
              *ngIf="cartItems.length > 0"
            >
              Clear Cart
            </button>
          </div>

          <div class="cart-item" *ngFor="let item of cartItems">
            <div class="cart-item__image">
              <img [src]="item.image" [alt]="item.name">
            </div>

            <div class="cart-item__details">
              <div class="cart-item__category">{{ item.category }}</div>
              <h3 class="cart-item__name">{{ item.name }}</h3>
              <div class="cart-item__size">Size: {{ item.size }}</div>
              <div class="cart-item__price-mobile">₦{{ item.price.toLocaleString() }}</div>
            </div>

            <div class="cart-item__price">
              ₦{{ item.price.toLocaleString() }}
            </div>

            <div class="cart-item__quantity">
              <div class="quantity-control">
                <button 
                  class="quantity-control__button" 
                  (click)="decrementQuantity(item)"
                  [disabled]="item.quantity <= 1"
                  [attr.aria-label]="'Decrease quantity of ' + item.name"
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                  </svg>
                </button>
                <input 
                  class="quantity-control__input" 
                  type="number" 
                  [(ngModel)]="item.quantity"
                  (change)="updateQuantity(item, item.quantity)"
                  min="1"
                  [attr.aria-label]="'Quantity of ' + item.name"
                />
                <button 
                  class="quantity-control__button" 
                  (click)="incrementQuantity(item)"
                  [attr.aria-label]="'Increase quantity of ' + item.name"
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                  </svg>
                </button>
              </div>
            </div>

            <div class="cart-item__total">
              ₦{{ getItemTotal(item).toLocaleString() }}
            </div>

            <button 
              class="cart-item__remove" 
              (click)="removeItem(item)"
              [attr.aria-label]="'Remove ' + item.name + ' from cart'"
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
              </svg>
            </button>
          </div>

          <!-- Continue Shopping -->
          <div class="continue-shopping">
            <a class="button button--secondary" routerLink="/shop">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
              </svg>
              Continue Shopping
            </a>
          </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary">
          <h2 class="cart-summary__title">Order Summary</h2>

          <div class="cart-summary__details">
            <div class="summary-row">
              <span class="summary-row__label">Subtotal</span>
              <span class="summary-row__value">₦{{ getSubtotal().toLocaleString() }}</span>
            </div>

            <div class="summary-row">
              <span class="summary-row__label">Shipping</span>
              <span class="summary-row__value" [class.summary-row__value--free]="getShipping() === 0">
                {{ getShipping() === 0 ? 'FREE' : '₦' + getShipping().toLocaleString() }}
              </span>
            </div>

            <div class="summary-row">
              <span class="summary-row__label">Tax (7.5% VAT)</span>
              <span class="summary-row__value">₦{{ getTax().toLocaleString() }}</span>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-row summary-row--total">
              <span class="summary-row__label">Total</span>
              <span class="summary-row__value">₦{{ getTotal().toLocaleString() }}</span>
            </div>
          </div>

          <!-- Shipping Notice -->
          <div class="shipping-notice" *ngIf="getShipping() > 0">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <p>Add ₦{{ (5000000 - getSubtotal()).toLocaleString() }} more to get FREE shipping!</p>
          </div>

          <div class="shipping-notice shipping-notice--success" *ngIf="getShipping() === 0">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <p>You qualify for FREE shipping!</p>
          </div>

          <!-- Checkout Button -->
          <a routerLink="/checkout/customer-info" class="button button--primary button--large button--full">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
            </svg>
            Proceed to Checkout
          </a>

          <!-- Security Badges -->
          <div class="security-badges">
            <div class="security-badge">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
              </svg>
              <span>Secure Checkout</span>
            </div>
            <div class="security-badge">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
              </svg>
              <span>Money Back Guarantee</span>
            </div>
          </div>
        </div>

      </div>

    </div>
  </section>

  <!-- Trust Section -->
  <section class="trust-section" *ngIf="cartItems.length > 0">
    <div class="trust-section__container">
      <div class="trust-feature">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
        </svg>
        <h3 class="trust-feature__title">Free Delivery</h3>
        <p class="trust-feature__description">On orders over ₦5,000,000</p>
      </div>

      <div class="trust-feature">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
        </svg>
        <h3 class="trust-feature__title">5-Year Warranty</h3>
        <p class="trust-feature__description">Comprehensive coverage</p>
      </div>

      <div class="trust-feature">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
        </svg>
        <h3 class="trust-feature__title">Easy Returns</h3>
        <p class="trust-feature__description">30-day return policy</p>
      </div>

      <div class="trust-feature">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/>
        </svg>
        <h3 class="trust-feature__title">24/7 Support</h3>
        <p class="trust-feature__description">Always here to help</p>
      </div>
    </div>
  </section>

</main>
